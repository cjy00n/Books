# 스코프란?

- `스코프(유효범위)`는 자바스크립트를 포함한 모든 프로그래밍 언어의 기본적이며 중요한 개념이다.
- 더욱이 자바스크립트의 스코프는 다른 언어의 스코프와 구별되는 특징이 있으므로 주의가 필요하다.
- 그리고 `var` 키워드로 선언한 변수와 `let` 또는 `const`키워드로 선언한 변수의 스코프도 다르게 동작한다.
- 스코프는 변수 그리고 함수와 깊은 관련이 있다.
- 함수의 매개변수는 함수 몸체 내부에서만 참조할 수 있고 함수 몸체 외부에서는 참조할 수 없다고 했다. 이것은 매개변수를 참조할 수 있는 유효범위, 즉 매개변수의 스코프가 함수 몸체 내부로 한정되기 때문이다.

```jsx
// 예제 13-01

function add(x, y) {
  // 매개변수는 함수 몸체 내부에서만 참조할 수 있다.
  // 즉, 매개변수의 스코프(유효범위)는 함수 몸체 내부다.
  console.log(x + y);
  return x + y;
}

add(2, 5);

// 매개변수는 함수 몸체 내부에서만 참조할 수 있다.
console.log(x + y); // ReferenceError : x is not defined
```

- 변수는 코드의 가장 바깥 영역뿐 아니라 코드 블록이나 함수 몸체 내에서도 선언할 수 있다.
- 이때 코드 블록이나 함수는 중첩될 수 있다.

```jsx
// 예제 13-02

var var1 = 1; // 코드의 가장 바깥 영역에서 선언한 변수

if (true) {
  var var2 = 2; // 코드 블록 내에서 선언한 변수
  if (true) {
    var var3 = 3; // 중첩된 코드 블록 내에서 선언한 변수
  }
}

function foo() {
  var var4 = 4; // 함수 내에서 선언한 변수

  function bar() {
    var var5 = 5; // 중첩된 함수 내에서 선언한 변수
  }
}

console.log(var1); // 1
console.log(var2); // 2
console.log(var3); // 3
console.log(var4); // ReferenceError : var4 is not defined
console.log(var5); // ReferenceError : var5 is not defined
```

- 변수는 자신이 선언된 위치에 의해 자신이 유효한 범위, 즉 다른 코드가 변수 자신을 참조할 수 있는 범위가 결정된다.
- 변수뿐만 아니라 모든 식별자가 그렇다.
- 다시 말해 , **모든 식별자 (변수 이름, 함수 이름, 클래스 이름 등)는 자신이 선언된 위치에 의해 다른 코드가 식별자 자신을 참조할 수 있는 유효 범위가 결정된다.**
- **이를 스코프라 한다.**
- **즉, `스코프`는 `식별자가 유효한 범위`를 말한다.**

- 다음 예제가 어떻게 동작할지 생각해보자

```jsx
// 예제 13-03

var x = "global";

function foo() {
  var x = "local";
  console.log(x); // ① : local
}

foo();

console.log(x); // ② : global
```

- `식별자 결정` : 자바스크립트 엔진은 이름이 같은 두 개의 변수 중에서 어떤 변수를 참조해야 할 것인지를 결정한다.
- 따라서 `스코프`란 자바스크립트 엔진이 **식별자를 검색할 때 사용하는 규칙**이라고도 할 수 있다.
- 자바스크립트 엔진은 코드를 실핼할 때 코드의 문맥(context)를 고려한다.
- 코드가 어디서 실해되며 주변에 어떤 코드가 있는지에 따라 위 예제의 ①과 ②처럼 동일한 코드도 다른 결과를 만들어낸다.

> **코드의 문맥과 환경**

`렉시컬 환경(lexical environment)` : 코드가 어디서 실행되며 주변에 어떤 코드가 있는지를 뜻한다.
즉, 코드의 문맥은 렉시컬 환경으로 이뤄진다.
이를 구현한 것이 `실행 컨텍스트(execution context`이며, 모든 코드는 실행 컨텍스트에서 평가되고 실행된다.
스코프는 실행컨텍스트와 깊은 관련이 있다.

>

- 위 예제에서 코드의 가장 바깐 영역에 선언된 x 변수는 어디서든 참조할 수 있다.
- 하지만 foo 함수 내부에서 선언된 x 변수는 foo 함수 내부에서만 참조할 수 있고 foo 함수 외부에서는 참조할 수 없다.
- 이때 두 개의 x 변수는 식별자 이름이 동일하지만 자신이 유효한 범위, 즉 스코프가 다른 별개의 변수다.

<figure align="center">
<img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fcn0zjT%2FbtqZoydJdrc%2FvHquKk6Vb0mf4PaExIsZX1%2Fimg.png" witdh="400">
<figcaption >[그림13-1] 스코프는 네임스페이스다.</figcation>
</figure>
